<html>
    <script>
        class Lancamento {

            constructor (categoria, tipo, valor) {
                if (tipo !== "receita" && tipo !== "despesa") {
                    //console.log ("O objeto não deve ser criado")
                    throw new Error ("Lancamento Inválido: Tipo deve ser receita ou despesa")
                }
                if (valor <= 0) {
                    throw new Error ("Lancamento Inválido: Valor deve ser maior que zero")
                }
                if (categoria === ""){
                    throw new Error ("Lancamento Inválido: A categoria é obrigatória")
                }
                this.categoria = categoria
                this.tipo = tipo
                this.valor = valor
            }
            
        }

        

        function arredondar (valor){
            return Math.round(valor*100)/100
        }

       function calcularJuros (valor) {
           juros = arredondar(valor * 0.1)
           return juros
       }

       function calcularRendimentos (valor){
        rendimentos = arredondar(valor * 0.005)
        console.log(rendimentos)
        return rendimentos
       }

       function calcularSaldo (mes, saldoInicial, lancamentos) {
            console.log(mes)
            totalizadorDoMes = { saldo: 0, saldoInicial, juros: 0, rendimentos: 0, receitas: 0, despesas: 0}
            totalizadorDoMes.saldo = saldoInicial
            for (lancamento of lancamentos) {
                if (lancamento.tipo === "receita"){
                    //saldo = saldo + lancamento
                    totalizadorDoMes.saldo += lancamento.valor
                    totalizadorDoMes.receitas += lancamento.valor
                } 
                if (lancamento.tipo === "despesa") {
                    totalizadorDoMes.saldo -= lancamento.valor
                    totalizadorDoMes.despesas += lancamento.valor
                }
            }
            estaNegativo = totalizadorDoMes.saldo < 0
            if (estaNegativo) {
                totalizadorDoMes.juros = calcularJuros(totalizadorDoMes.saldo) 
                totalizadorDoMes.saldo = arredondar(totalizadorDoMes.saldo + totalizadorDoMes.juros)         
            } else {
                totalizadorDoMes.rendimentos = calcularRendimentos(totalizadorDoMes.saldo)
                totalizadorDoMes.saldo = arredondar(totalizadorDoMes.saldo + totalizadorDoMes.rendimentos)
            }
            return totalizadorDoMes
        }

        saldoInicial = 0
        lancamentosJaneiro = [
            new Lancamento("salário", "receita", 3000), 
            new Lancamento("aluguel", "despesa", 1000), 
            new Lancamento("conta de luz", "despesa", 200), 
            new Lancamento("conta de agua", "despesa", 100), 
            new Lancamento("internet", "despesa", 100), 
            new Lancamento("transporte", "despesa", 300), 
            new Lancamento("lazer", "despesa", 300), 
            new Lancamento("alimentação", "despesa", 500), 
            new Lancamento("condominio", "despesa", 300), 
            new Lancamento("farmacia", "despesa", 100)
    ]        
        totalizadorDoMes1 = calcularSaldo("Janeiro", 0, lancamentosJaneiro)
        console.log(totalizadorDoMes1)  
        lancamentosFevereiro = [
        new Lancamento("salario", "receita", 3000), 
        new Lancamento("aluguel", "despesa", 1200), 
        new Lancamento("conta de luz", "despesa", 250), 
        new Lancamento("conta de agua", "despesa", 100), 
        new Lancamento("internet", "despesa", 100), 
        new Lancamento("transporte", "despesa", 500), 
        new Lancamento("alimentação", "despesa", 1000), 
        new Lancamento("condominio", "despesa", 400)
    ]       
        totalizadorDoMes2 = calcularSaldo("Fevereiro", totalizadorDoMes1.saldo, lancamentosFevereiro)
        console.log(totalizadorDoMes2)
        lancamentosMarco = [
        new Lancamento("salario", "receita", 4000), 
        new Lancamento("aluguel", "despesa", 1200), 
        new Lancamento("conta de luz", "despesa", 200), 
        new Lancamento("conta de agua", "despesa", 100), 
        new Lancamento("internet", "despesa", 200), 
        new Lancamento("transporte", "despesa", 500), 
        new Lancamento("lazer", "despesa", 800), 
        new Lancamento("alimentação", "despesa", 1000), 
        new Lancamento("condominio", "despesa", 400)
    ]
        totalizadorDoMes3 = calcularSaldo("Março", totalizadorDoMes2.saldo, lancamentosMarco)
        console.log(totalizadorDoMes3)
        console.log("O valor acumulado do ano foi de: ")
        console.log(totalizadorDoMes3.saldo)  
        
        //console.log("Quantidade de lançamentos em Janeiro:", lancamentosJaneiro.length)
        //lancamentosJaneiro.pop()
        //lancamentosJaneiro.pop()
        //lancamentosJaneiro.push ({categoria: "Financiamento", tipo: "despesa", valor: 200})
        //for (lancamento of lancamentosJaneiro) {
          //  console.log(lancamento.categoria, lancamento.valor)
        //}
    </script>
</html>  